<div style="padding-top: 54px;height: 100%">
  <div>
    <div class="ui {{ image.loaded ? '' : 'active' }} dimmer">
      <div class="ui text loader">Loading Next Image</div>
    </div>
  </div>

  <div style="display: flex; height: calc(100vh - 105px);"> <!-- calc(100vh - 165px) when using Recently Annotated -->
    <div class="magnify">
      <div class="maglarge"></div>
      <img class="ui magsmall image" [src]="image.url"/>
    </div>

    <div style="padding: 0 0 0 0; flex: 1;">
      <div class="ui inverted segment" style="height: 100%; display:flex; flex-direction: column;background: black;">
        <h3 class="ui dividing header" [style.background]="ctxQuality ? '#417d44' : '#1B1C1D'" style="padding: 0.4em 1em 1em 1em; height: 2em; cursor: pointer;" (click)="toogleQuality()">Image Quality</h3>
        <div class="ui inverted form" style="flex: 1">
          <div class="field">
            <label>Image Readability</label>
            <div class="ui small buttons">
              <button class="ui grey {{ getStateClass(node(QUALITY).quality, 'GOOD') }} button" (click)="setQuality('GOOD')">Readable</button>
              <button class="ui grey {{ getStateClass(node(QUALITY).quality, 'PARTIAL') }} button" (click)="setQuality('PARTIAL')">Low Confidence</button>
              <button class="ui red {{ getStateClass(node(QUALITY).quality, 'BAD') }} button" (click)="setQuality('BAD')">Unreadable</button>
            </div>
          </div>
          <div class="field">
            <label>Centered in</label>
            <div class="ui small buttons">
              <button class="ui grey {{ getStateClass(node(QUALITY).local, 'MACULA') }} button" (click)="setLocal('MACULA')">Macula</button>
              <button class="ui grey {{ getStateClass(node(QUALITY).local, 'OPTIC_DICS') }} button" (click)="setLocal('OPTIC_DICS')">Optic Disc</button>
              <button class="ui grey {{ getStateClass(node(QUALITY).local, 'OTHER') }} button" (click)="setLocal('OTHER')">Other</button>
            </div>
          </div>
        </div>
        
        <h3 class="ui dividing header" [style.background]="ctxDiagnosis ? '#417d44' : '#1B1C1D'" style="padding: 0.4em 1em 1em 1em; height: 2em; cursor: pointer;" (click)="toogleDiagnosis()">Diagnosis</h3>
        <div class="ui inverted form" style="flex: 1">
          <div class="field">
            <label>Retinopathy</label>
            <div class="ui small buttons">
              <button class="ui grey {{ getStateClass(node(DIAGNOSIS).retinopathy, 'R0') }} button" (click)="setRetinopathy('R0')">R0</button>
              <button class="ui grey {{ getStateClass(node(DIAGNOSIS).retinopathy, 'R1') }} button" (click)="setRetinopathy('R1')">R1</button>
              <button class="ui grey {{ getStateClass(node(DIAGNOSIS).retinopathy, 'R2_M') }} button" (click)="setRetinopathy('R2_M')">R2-M</button>
              <button class="ui grey {{ getStateClass(node(DIAGNOSIS).retinopathy, 'R2_S') }} button" (click)="setRetinopathy('R2_S')">R2-S</button>
              <button class="ui grey {{ getStateClass(node(DIAGNOSIS).retinopathy, 'R3') }} button" (click)="setRetinopathy('R3')">R3</button>
            </div>
          </div>
          <div class="field">
            <label>Maculopathy</label>
            <div class="ui small buttons">
              <button class="ui grey {{ getStateClass(node(DIAGNOSIS).maculopathy, 'M0') }} button" (click)="setMaculopathy('M0')">M0</button>
              <button class="ui grey {{ getStateClass(node(DIAGNOSIS).maculopathy, 'M1') }} button" (click)="setMaculopathy('M1')">M1</button>
            </div>
          </div>
          <div class="field">
            <label>Photocoagulation</label>
            <div class="ui small buttons">
              <button class="ui grey {{ getStateClass(node(DIAGNOSIS).photocoagulation, 'P0') }} button" (click)="setPhotocoagulation('P0')">P0</button>
              <button class="ui grey {{ getStateClass(node(DIAGNOSIS).photocoagulation, 'P1') }} button" (click)="setPhotocoagulation('P1')">P1</button>
              <button class="ui grey {{ getStateClass(node(DIAGNOSIS).photocoagulation, 'P2') }} button" (click)="setPhotocoagulation('P2')">P2</button>
            </div>
          </div>
        </div>

        <div class="ui {{ isReadyToDone() ? '' : 'basic disabled' }} small button" style="margin-top: 2em;" (click)="done()">
          <div class="visible content">Save</div>
        </div>
      </div>
    </div>
  </div>

  <!--Recently Annotated-->
  <!--div class="ui eye-stream main tiny menu" style="background-color:black; height:10%; max-height:60px; margin:0px;">
    <div class="menu menu-eye" style="margin-right:0!important;overflow: hidden; width:100%">
      <div class="item item-menu" style="padding: 0; width: 100%;">
        <div class="ui images" style="height: 100%;">
          <img *ngFor="let img of images.slice(start, last)" class="ui image item-image" [src]="img.url" (click)="select(img)"
            style="cursor: pointer; border: 0px dotted #d4d4d5;" [style.border-width]="img == image ? '1px' : '0px'">
        </div>
      </div>
    </div>
  </div-->
  
  <!--Progress and Load-->
  <div class="column" style="margin: auto; padding: 10px 5px 0px 10px; display:flex;">
    
    <div class="ui progress" style="flex: auto;">
      <div class="bar" style="height:100%; min-width:6em;"><div class="progress"></div></div>
    </div>

    <div style="display: flex; align-items: center; margin-left: 0.3em;">
      <i class="fast backward large link icon" (click)="setPosition(1)"></i>
      <i class="step backward large link icon" (click)="setPosition(progress)"></i>
      <div class="ui mini input" style="width: 6em">
        <input #pos type="number" [min]="1" [max]="dsLast + 1" style="text-align: right;" (keyup.enter)="setPosition(pos.value)" [value]="progress + 1">
      </div>
      <i class="step forward large link icon" (click)="setPosition(progress + 2)"></i>
      <i class="fast forward large link icon" (click)="setPosition()"></i>
    </div>
  </div>
</div>